// Name:            Navbar
// Description:     Component to create horizontal navigation bars
//
// Component:       `uk-navbar`
//
// Sub-objects:     `uk-navbar-container`
//                  `uk-navbar-left`
//                  `uk-navbar-right`
//                  `uk-navbar-center`
//                  `uk-navbar-center-left`
//                  `uk-navbar-center-right`
//                  `uk-navbar-nav`
//                  `uk-navbar-item`
//                  `uk-navbar-toggle`
//                  `uk-navbar-subtitle`
//                  `uk-navbar-dropbar`
//
// Adopted:         `uk-navbar-dropdown` + Modifiers
//                  `uk-navbar-dropdown-nav`
//                  `uk-navbar-dropdown-grid`
//                  `uk-navbar-toggle-icon`
//
// Modifiers:       `uk-navbar-primary`
//                  `uk-navbar-transparent`
//                  `uk-navbar-sticky`
//                  `uk-navbar-dropdown-stack`
//
// States:          `uk-active`
//                  `uk-parent`
//                  `uk-open`
//
//
// ========================================================================


// Variables
// ========================================================================

:where(html) {

    --navbar-background:                              hsl(var(--global-muted-background));
    --navbar-padding-vertical:                        12px;

    --navbar-nav-item-height:                         80px;
    --navbar-nav-item-padding-horizontal:             12px;
    --navbar-nav-item-color:                          hsl(var(--global-muted-color));
    --navbar-nav-item-font-size:                      calc( var(--global-font-size) * 0.875 );
    --navbar-nav-item-font-family:                    var(--global-font-family);
    --navbar-nav-item-font-weight:                    400;
    --navbar-nav-item-letter-spacing:                 .05em;
    --navbar-nav-item-text-transform:                 uppercase;
    --navbar-nav-item-hover-color:                    hsl(var(--global-color));
    --navbar-nav-item-onclick-color:                  hsl(var(--global-emphasis-color));
    --navbar-nav-item-active-color:                   hsl(var(--global-emphasis-color));

    --navbar-item-color:                              hsl(var(--global-color));

    --navbar-toggle-color:                            hsl(var(--global-muted-color));
    --navbar-toggle-hover-color:                      hsl(var(--global-color));

    --navbar-subtitle-font-size:                      var(--global-small-font-size);

    --navbar-dropdown-z-index:                        calc( var(--global-z-index) + 20 );
    --navbar-dropdown-margin:                         0px;
    --navbar-dropdown-width:                          200px;
    --navbar-dropdown-padding:                        15px;
    --navbar-dropdown-background:                     hsl(var(--global-muted-background));
    --navbar-dropdown-color:                          hsl(var(--global-color));
    --navbar-dropdown-grid-gutter-horizontal:         var(--global-gutter);
    --navbar-dropdown-grid-gutter-vertical:           var(--navbar-dropdown-grid-gutter-horizontal);

    --navbar-dropdown-dropbar-margin-top:             0px;
    --navbar-dropdown-dropbar-margin-bottom:          var(--navbar-dropdown-dropbar-margin-top);
    --navbar-dropdown-dropbar-padding-horizontal:     var(--navbar-nav-item-padding-horizontal);

    --navbar-dropdown-nav-item-color:                 hsl(var(--global-muted-color));
    --navbar-dropdown-nav-item-hover-color:           hsl(var(--global-color));
    --navbar-dropdown-nav-item-active-color:          hsl(var(--global-emphasis-color));
    --navbar-dropdown-nav-subtitle-font-size:         var(--global-small-font-size);
    --navbar-dropdown-nav-header-color:               hsl(var(--global-emphasis-color));
    --navbar-dropdown-nav-divider-border-width:       var(--global-border-width);
    --navbar-dropdown-nav-divider-border:             hsl(var(--global-border));
    --navbar-dropdown-nav-sublist-item-color:         hsl(var(--global-muted-color));
    --navbar-dropdown-nav-sublist-item-hover-color:   hsl(var(--global-color));
    --navbar-dropdown-nav-sublist-item-active-color:  hsl(var(--global-emphasis-color));

    --navbar-dropbar-background:                      var(--navbar-dropdown-background);
    --navbar-dropbar-z-index:                         calc( var(--global-z-index) - 20 );

}

@media (min-width: $breakpoint-medium) {

    :where(.uk-navbar,[class*='uk-navbar']) {

        --navbar-padding-vertical:                    20px;

        --navbar-nav-item-padding-horizontal:         20px;

    }

}


/* ========================================================================
   Component: Navbar
 ========================================================================== */

/*
 * 1. Create position context to center navbar group
 */

.uk-navbar {
    display: flex;
    /* 1 */
    position: relative;
}

.uk-navbar-overlay {
    inset-inline-start: 0;
    inset-inline-end: 0;
    position: absolute;
}


/* Container
 ========================================================================== */

.uk-navbar-container:not(.uk-navbar-transparent) {
    background: var(--navbar-background);
}

.uk-navbar-container { padding-block: var(--navbar-padding-vertical); }


/* Groups
 ========================================================================== */

/*
 * 1. Align navs and items vertically if they have a different height
 * 2. Note: IE 11 requires an extra `div` which affects the center selector
 */

.uk-navbar-left,
.uk-navbar-right,
// 2. [class*='uk-navbar-center'],
.uk-navbar-center,
.uk-navbar-center-left > *,
.uk-navbar-center-right > * {
    display: flex;
    /* 1 */
    align-items: center;
}

/*
 * Horizontal alignment
 * 1. Create position context for centered navbar with sub groups (left/right)
 * 2. Fix text wrapping if content is larger than 50% of the container.
 * 3. Needed for dropdowns because a new position context is created
 *    `z-index` must be smaller than off-canvas
 * 4. Align sub groups for centered navbar
 */

.uk-navbar-right { margin-inline-start: auto; }

.uk-navbar-center:only-child {
    margin-inline-start: auto;
    margin-inline-end: auto;
    /* 1 */
    position: relative;
}

.uk-navbar-center:not(:only-child) {
    position: absolute;
    inset-block-start: 50%;
    inset-inline-start: 50%;
    transform: translate(-50%,-50%);
    /* 2 */
    inline-size: max-content;
    box-sizing: border-box;
    /* 3 */
    z-index: calc( var(--global-z-index) - 10 );
}

/* 4 */
.uk-navbar-center-left,
.uk-navbar-center-right {
   position: absolute;
   inset-block-start: 0;
}

.uk-navbar-center-left { inset-inline-end: 100%; }
.uk-navbar-center-right { inset-inline-start: 100%; }

[class*='uk-navbar-center-'] {
    inline-size: max-content;
    box-sizing: border-box;
}


/* Nav
 ========================================================================== */

/*
 * 1. Reset list
 */

.uk-navbar-nav {
    display: flex;
    /* 1 */
    margin: 0;
    padding: 0;
    list-style: none;
}

/*
 * Allow items to wrap into the next line
 * Only not `absolute` positioned groups
 */

.uk-navbar-left,
.uk-navbar-right,
.uk-navbar-center:only-child { flex-wrap: wrap; }

/*
 * Items
 * 1. Center content vertically and horizontally
 * 2. Imitate white space gap when using flexbox
 * 3. Dimensions
 * 4. Style
 * 5. Required for `a`
 */

.uk-navbar-nav > li > a,    // Nav item
.uk-navbar-item,            // Content item
.uk-navbar-toggle {         // Clickable item
    /* 1 */
    display: flex;
    justify-content: center;
    align-items: center;
    /* 2 */
    column-gap: 0.25em;
    /* 3 */
    box-sizing: border-box;
    min-block-size: var(--navbar-nav-item-height);
    padding: 0 var(--navbar-nav-item-padding-horizontal);
    /* 4 */
    font-size: var(--navbar-nav-item-font-size);
    font-family: var(--navbar-nav-item-font-family);
    font-weight: var(--navbar-nav-item-font-weight);
    letter-spacing: var(--navbar-nav-item-letter-spacing);
    text-transform: var(--navbar-nav-item-text-transform);
    /* 5 */
    text-decoration: none;
}

/*
 * Nav items
 */

.uk-navbar-nav > li > a {
    color: var(--navbar-nav-item-color);
}

/*
 * Hover
 * Apply hover style also if dropdown is opened
 */

.uk-navbar-nav > li:hover > a,
.uk-navbar-nav > li > a[aria-expanded="true"] {
    color: var(--navbar-nav-item-hover-color);
}

/* OnClick */
.uk-navbar-nav > li > a:active {
    color: var(--navbar-nav-item-onclick-color);
}

/* Active */
.uk-navbar-nav > li.uk-active > a {
    color: var(--navbar-nav-item-active-color);
}


/* Item
 ========================================================================== */

.uk-navbar-item {
    color: var(--navbar-item-color);
}

/*
 * Remove margin from the last-child
 */

.uk-navbar-item > :last-child { margin-block-end: 0; }


/* Toggle
 ========================================================================== */

.uk-navbar-toggle {
    color: var(--navbar-toggle-color);
}

.uk-navbar-toggle:hover,
.uk-navbar-toggle[aria-expanded="true"] {
    color: var(--navbar-toggle-hover-color);
    text-decoration: none;
}

/*
 * Icon
 * Adopts `uk-icon`
 */

.uk-navbar-toggle-icon {}

/* Hover */
:hover > .uk-navbar-toggle-icon {}


/* Subtitle
 ========================================================================== */

.uk-navbar-subtitle {
    font-size: var(--navbar-subtitle-font-size);
}


/* Justify modifier
 ========================================================================== */

.uk-navbar-justify .uk-navbar-left,
.uk-navbar-justify .uk-navbar-right,
.uk-navbar-justify .uk-navbar-nav,
.uk-navbar-justify .uk-navbar-nav > li,        // Nav item
.uk-navbar-justify .uk-navbar-item,            // Content item
.uk-navbar-justify .uk-navbar-toggle { flex-grow: 1; }


/* Style modifiers
 ========================================================================== */

.uk-navbar-primary {}

.uk-navbar-transparent {}

.uk-navbar-sticky {}


/* Dropdown
 ========================================================================== */

/*
 * Adopts `uk-dropdown`
 * 1. Hide by default
 * 2. Set position
 * 3. Set a default width
 * 4. Style
 */

.uk-navbar-dropdown {
    /* 1 */
    display: none;
    /* 2 */
    position: absolute;
    z-index: var(--navbar-dropdown-z-index);
    --uk-position-offset: var(--navbar-dropdown-margin);
    --uk-position-viewport-offset: 10;
    /* 3 */
    box-sizing: border-box;
    inline-size: var(--navbar-dropdown-width);
    max-inline-size: 100vw;
    /* 4 */
    padding: var(--navbar-dropdown-padding);
    background: var(--navbar-dropdown-background);
    color: var(--navbar-dropdown-color);
}

/* Show */
.uk-navbar-dropdown.uk-open { display: block; }

/*
 * Grid
 * Adopts `uk-grid`
 */

/* Gutter Horizontal */
.uk-navbar-dropdown-grid { margin-inline-start: calc( -1 * var(--navbar-dropdown-grid-gutter-horizontal) ); }
.uk-navbar-dropdown-grid > * { padding-inline-start: var(--navbar-dropdown-grid-gutter-horizontal); }

/* Gutter Vertical */
.uk-navbar-dropdown-grid > .uk-grid-margin { margin-block-start: var(--navbar-dropdown-grid-gutter-vertical); }

/* Stack */
.uk-navbar-dropdown-stack .uk-navbar-dropdown-grid > * { inline-size: 100% !important; }

/*
 * Width modifier
 */

.uk-navbar-dropdown-width-2:not(.uk-navbar-dropdown-stack) { inline-size: calc( var(--navbar-dropdown-width) * 2 ); }
.uk-navbar-dropdown-width-3:not(.uk-navbar-dropdown-stack) { inline-size: calc( var(--navbar-dropdown-width) * 3 ); }
.uk-navbar-dropdown-width-4:not(.uk-navbar-dropdown-stack) { inline-size: calc( var(--navbar-dropdown-width) * 4 ); }
.uk-navbar-dropdown-width-5:not(.uk-navbar-dropdown-stack) { inline-size: calc( var(--navbar-dropdown-width) * 5 ); }

/*
 * Dropbar modifier
 * 1. Set position
 * 2. Bottom padding for dropbar
 * 3. Horizontal padding
 */

.uk-navbar-dropdown-dropbar {
    /* 1 */
    --uk-position-offset: var(--navbar-dropdown-dropbar-margin-top);
    --uk-position-viewport-offset: 0;
    /* 2 */
    margin-block-end: var(--navbar-dropdown-dropbar-margin-bottom);
    /* 3 */
    padding-inline: var(--navbar-dropdown-dropbar-padding-horizontal);
}


/* Dropdown Nav
 * Adopts `uk-nav`
 ========================================================================== */

.uk-navbar-dropdown-nav {}

/*
 * Items
 */

.uk-navbar-dropdown-nav > li > a {
    color: var(--navbar-dropdown-nav-item-color);
}

/* Hover */
.uk-navbar-dropdown-nav > li > a:hover {
    color: var(--navbar-dropdown-nav-item-hover-color);
}

/* Active */
.uk-navbar-dropdown-nav > li.uk-active > a {
    color: var(--navbar-dropdown-nav-item-active-color);
}

/*
 * Subtitle
 */

.uk-navbar-dropdown-nav .uk-nav-subtitle {
    font-size: var(--navbar-dropdown-nav-subtitle-font-size);
}

/*
 * Header
 */

.uk-navbar-dropdown-nav .uk-nav-header {
    color: var(--navbar-dropdown-nav-header-color);
}

/*
 * Divider
 */

.uk-navbar-dropdown-nav .uk-nav-divider {
    border-block-start: var(--navbar-dropdown-nav-divider-border-width) solid var(--navbar-dropdown-nav-divider-border);
}

/*
 * Sublists
 */

.uk-navbar-dropdown-nav .uk-nav-sub a { color: var(--navbar-dropdown-nav-sublist-item-color); }

.uk-navbar-dropdown-nav .uk-nav-sub a:hover { color: var(--navbar-dropdown-nav-sublist-item-hover-color); }

.uk-navbar-dropdown-nav .uk-nav-sub li.uk-active > a { color: var(--navbar-dropdown-nav-sublist-item-active-color); }


/* Dropbar
 ========================================================================== */

.uk-navbar-dropbar {
    position: absolute;
    z-index: var(--navbar-dropbar-z-index);
    inset-inline-start: 0;
    inset-inline-end: 0;
    background: var(--navbar-dropbar-background);
}
